<div class="flex flex-col text-center">
  <div x-data="{dialogOpen: false}" class="relative">
    <form
      x-data="{email: ''}"
      @submit.prevent="pb.collection('applicants').create({email}); email = '', dialogOpen =! dialogOpen"
    >
      <input type="email" x-model="email" placeholder="Enter your email" />

      <input type="submit" value="🪄 Join waitlist" id="button" />
    </form>
    <div
      x-show="dialogOpen"
      x-effect="dialogOpen ? document.body.style.overflow = 'hidden' : document.body.style.overflow = 'auto'"
      class="fixed inset-0 backdrop-blur-sm transition-opacity duration-300"
    >
    </div>
    <div x-show="dialogOpen" x-transition class="absolute bottom-0">
      <div class="border flex flex-col gap-4 bg-gray-950 py-16 rounded-md">
        <h1>Success!</h1>
        <p>
          You're on the waitlist. You'll receive an email ones the project is in
          beta! 🎉
        </p>
        <button
          class="mx-12"
          @click="dialogOpen =! dialogOpen"
          @click.outside="dialogOpen =! dialogOpen">Close</button
        >
      </div>
    </div>
  </div>
</div>

<script>
  import JSConfetti from "js-confetti";
  const canvas = document.getElementById("custom_canvas");
  const button = document.getElementById("button");

  const jsConfetti = new JSConfetti({
    canvas: canvas as HTMLCanvasElement,
  });

  button.addEventListener("click", () => {
    jsConfetti.addConfetti({
      emojis: ["👩‍💻", "🧑‍💻", "🎮", "👾", "💻", "🪄"],
      confettiRadius: 10,
      confettiNumber: 50,
    });
  });
</script>
